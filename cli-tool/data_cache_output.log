FAIL tests/unit/DataCache.test.js
  DataCache
    constructor
      ✓ should initialize with empty caches and metrics (2 ms)
      ✓ should configure correctly
    getFileContent
      ✓ should read file when not cached
      ✓ should return cached content when file unchanged
      ✓ should re-read file when modified
      ✓ should handle file read errors (2 ms)
    getParsedConversation
      ✕ should parse conversation content correctly (1 ms)
      ✓ should cache parsed results
    getCachedTokenUsage
      ✓ should compute and cache token usage
      ✓ should return cached result on subsequent calls (1 ms)
    invalidateFile
      ✓ should remove all cache entries for a file
    evictOldEntries
      ✓ should remove expired cache entries (1 ms)
    getStats
      ✓ should return cache statistics (1 ms)
    cleanup
      ✓ should clear all caches

  ● DataCache › getParsedConversation › should parse conversation content correctly

    expect(received).toHaveLength(expected)

    Expected length: 2
    Received length: 0
    Received array:  []

      127 |       const parsed = await dataCache.getParsedConversation(mockFilePath);
      128 |       
    > 129 |       expect(parsed).toHaveLength(2);
          |                      ^
      130 |       expect(parsed[0].content).toBe('hello');
      131 |     });
      132 |

      at Object.<anonymous> (tests/unit/DataCache.test.js:129:22)

--------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------
File                      | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                             
--------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------
All files                 |    2.16 |     1.05 |    1.61 |    2.27 |                                                                                               
 analytics-web/components |       0 |        0 |       0 |       0 |                                                                                               
  ActivityHeatmap.js      |       0 |        0 |       0 |       0 | 7-782                                                                                         
  AgentAnalytics.js       |       0 |        0 |       0 |       0 | 7-709                                                                                         
  App.js                  |       0 |        0 |       0 |       0 | 7-440                                                                                         
  Charts.js               |       0 |        0 |       0 |       0 | 7-113                                                                                         
  ConversationTable.js    |       0 |        0 |       0 |       0 | 7-436                                                                                         
  DashboardPage.js        |       0 |        0 |       0 |       0 | 7-2289                                                                                        
  HeaderComponent.js      |       0 |        0 |       0 |       0 | 7-306                                                                                         
  SessionTimer.js         |       0 |        0 |       0 |       0 | 7-598                                                                                         
  Sidebar.js              |       0 |        0 |       0 |       0 | 7-187                                                                                         
  ToolDisplay.js          |       0 |        0 |       0 |       0 | 7-553                                                                                         
 analytics-web/services   |       0 |        0 |       0 |       0 |                                                                                               
  DataService.js          |       0 |        0 |       0 |       0 | 7-449                                                                                         
  StateService.js         |       0 |        0 |       0 |       0 | 7-284                                                                                         
  WebSocketService.js     |       0 |        0 |       0 |       0 | 7-534                                                                                         
 analytics/core           |       0 |        0 |       0 |       0 |                                                                                               
  AgentAnalyzer.js        |       0 |        0 |       0 |       0 | 5-355                                                                                         
  ConversationAnalyzer.js |       0 |        0 |       0 |       0 | 1-966                                                                                         
  FileWatcher.js          |       0 |        0 |       0 |       0 | 1-429                                                                                         
  ProcessDetector.js      |       0 |        0 |       0 |       0 | 1-280                                                                                         
  SessionAnalyzer.js      |       0 |        0 |       0 |       0 | 5-686                                                                                         
  StateCalculator.js      |       0 |        0 |       0 |       0 | 1-246                                                                                         
  YearInReview2025.js     |       0 |        0 |       0 |       0 | 1-982                                                                                         
 analytics/data           |   43.75 |     19.2 |   46.87 |   44.29 |                                                                                               
  DataCache.js            |   43.75 |     19.2 |   46.87 |   44.29 | 61-62,151-161,174-201,212-252,293-347,383-451,474-480,492-507,552-554,560-562,576-611,656-673 
 analytics/notifications  |       0 |        0 |       0 |       0 |                                                                                               
  NotificationManager.js  |       0 |        0 |       0 |       0 | 5-485                                                                                         
  WebSocketServer.js      |       0 |        0 |       0 |       0 | 5-526                                                                                         
 analytics/utils          |       0 |        0 |       0 |       0 |                                                                                               
  PerformanceMonitor.js   |       0 |        0 |       0 |       0 | 5-467                                                                                         
--------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for statements (70%) not met: 3.14%
Jest: "global" coverage threshold for branches (70%) not met: 1.57%
Jest: "global" coverage threshold for lines (70%) not met: 3.28%
Jest: "global" coverage threshold for functions (70%) not met: 2.38%
Jest: "./src/analytics/core/" coverage threshold for statements (80%) not met: 0%
Jest: "./src/analytics/core/" coverage threshold for branches (80%) not met: 0%
Jest: "./src/analytics/core/" coverage threshold for lines (80%) not met: 0%
Jest: "./src/analytics/core/" coverage threshold for functions (80%) not met: 0%
Test Suites: 1 failed, 1 total
Tests:       1 failed, 13 passed, 14 total
Snapshots:   0 total
Time:        1.567 s
Ran all test suites matching tests/unit/DataCache.test.js.
